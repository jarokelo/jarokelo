function getRadioTemplate(){return'<div title="Tételek rendezése" class="item pull-left full_width"> <span class="dot"></span> <input type="text" class="form form-control form-control_inline"> <span title="Eltávolítás" class="remove_container"><i class="glyphicon glyphicon-remove"></i></span> </div>'}function getCheckboxTemplate(){return'<div title="Tételek rendezése" class="item pull-left full_width"> <span class="square"></span> <input type="text" class="form form-control form-control_inline"> <span title="Eltávolítás" class="remove_container"><i class="glyphicon glyphicon-remove"></i></span> </div>'}function getSingleSelectDropdownTemplate(){return'<div title="Tételek rendezése" class="item pull-left full_width"> <input type="text" class="form form-control form-control_inline"> <span title="Eltávolítás" class="remove_container"><i class="glyphicon glyphicon-remove"></i></span> </div>'}$(function(){function e(){return $("#customquestion-type :selected").val()}function t(){$(".type_"+e()).css({display:"block"})}function n(){return $(".type_"+e()+" .item").length}function i(){var t=$(".type_"+e()+" .remove_container");t.off("click"),t.on("click",function(){var e=$(this).closest(".item");n()>1?e.remove():e.find("input").val("")})}function o(){switch(e()){case TYPE_RADIO:return getRadioTemplate();case TYPE_CHECKBOX:return getCheckboxTemplate();case TYPE_SINGLE_SELECT_DROPDOWN:return getSingleSelectDropdownTemplate()}return""}function a(){var t=$(".type_"+e()+" .item_container"),n=o();t.append(n),i()}function l(){var t=$(".type_"+e()+" .item_container"),n=o();if(e()===TYPE_LINEAR_SCALE){var a=ANSWER_OPTIONS[0];a&&($('[name="CustomQuestion[answer_options][linear_scale][left_label]"]').val(a.left_label),$('[name="CustomQuestion[answer_options][linear_scale][right_label]"]').val(a.right_label),$('[name="CustomQuestion[answer_options][linear_scale][scale_left]"]').val(a.scale_left),$('[name="CustomQuestion[answer_options][linear_scale][scale_right]"]').val(a.scale_right))}else ANSWER_OPTIONS.length>0&&ANSWER_OPTIONS.forEach(function(e){t.append(n);var o=$(t.find(".item")[t.find(".item").length-1]),a=o.find("input");a.val(e.value),i()})}$("#customquestion-type").on("change",function(){$(".type_section").css({display:"none"}),t(),0===n()&&a()}),$(".add_container").click(function(){var t=$(".type_"+e()+" .item");$(t[t.length-1]).find("input").focus()}),$(".add_container a").click(function(){a()}),$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};var s=$("#custom-question");s.on("beforeSubmit",function(){var t=s.serializeObject(),n=new FormData;for(var i in t)n.append(i,t[i]);return $(".type_"+e()+" .item").each(function(t,i){e()!==TYPE_LINEAR_SCALE&&n.append("CustomQuestion[answer_options][text]["+t+"]",$(i).find("input").val()||0)}),$.ajax({dataType:"json",contentType:!1,processData:!1,url:s.attr("action"),type:"POST",data:n,success:function(e){if(e)if("object"==typeof e){var t="";for(var n in e)t+=e[n][0]+"\n";alert("Hiba történt! "+t)}else document.location.href="/admin/custom-question/index";else alert("Hiba történt!"),setTimeout(function(){document.location.reload()},3e3)},error:function(e){alert("Hiba történt!"),setTimeout(function(){document.location.reload()},3e3)}}),!1}),$(".sortable").sortable().disableSelection(),l(),t()});