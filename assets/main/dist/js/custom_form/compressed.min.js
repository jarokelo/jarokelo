function customFormHandler(e,a){$(e).each(function(e,t){t.custom_questions.length&&t.customQuestions.forEach(function(e){e.type=1*e.type;var i=JSON.parse(e.answer_options),r=t.id+"_"+e.id,n="ReportForm[customForm]["+t.id+"]["+e.id+"]",o=r,d="help-block_"+t.id+"_"+e.id,s='<div id="'+d+'" class="help-block"></div>';switch(e.required=1*e.required,e.type===TYPE_CHECKBOX&&(n+="[]"),e.type){case TYPE_CHECKBOX:case TYPE_RADIO:a.append('<div data-id="'+r+'" data-type="'+e.type+'" aria-describedby="'+d+'" aria-required="'+(1===e.required?"true":"false")+'" class="wrapper_container_'+o+" question_container error_container type_"+e.type+'"><fieldset><div class="question"><legend class="label label--default"><span>'+e.question+"</span>"+(1===e.required?' <span style="color: #d34545;">(*)</span>':"")+(e.description?'<div class="description">'+e.description+"</div>":"")+'</legend></div><div class="custom-question_container"></div></fieldset></div>');break;default:a.append('<div data-id="'+r+'" data-type="'+e.type+'" aria-describedby="'+d+'" aria-required="'+(1===e.required?"true":"false")+'" class="wrapper_container_'+o+" question_container error_container type_"+e.type+'"><div class="question"><label class="label label--default" for="'+o+'"><span>'+e.question+"</span>"+(1===e.required?' <span style="color: #d34545;">(*)</span>':"")+(e.description?'<div class="description">'+e.description+"</div>":"")+'</label></div><div class="custom-question_container"></div></div>')}var l=$(a.find(".question_container")[$counter]).find(".custom-question_container");switch(e.type){case TYPE_LONG_TEXT_ANSWER:var c=i[0]&&i[0].value?i[0].value:2e3,p='<div><div style="margin-bottom: 10px;">Maximum engedélyezett karakter: '+c+' </div><textarea class="question_textarea input input--default" rows="6" id="'+o+'" name="'+n+'" maxlength="'+c+'" ></textarea> <div style="margin-top: 10px;">Még bevihető karakterek száma: <span id="'+o+'_character_left">'+c+"</span></div>";l.append(p),l.append(s),setTimeout(function(){$("#"+o).bind("keyup change",function(){$("#"+o+"_character_left").text(1*c-1*$(this).val().length)})},0);break;case TYPE_SINGLE_SELECT_DROPDOWN:var u=$('<div class="select select--default select--full"></div>'),v=$('<select id="'+o+'" name="'+n+'" class="input input--default single_select_dropdown "></select>'),_=$('<svg class="select__icon icon"><use xlink:href="'+BUNDLE_BASE_URL+'/images/icons.svg#icon-chevron-down"></use></svg>');u.append(v),u.append(_),i.forEach(function(e){var a='<option value="'+e.value+'">'+e.value+"</option>";v.append(a)}),l.append(u),l.append(s);break;case TYPE_RADIO:i.forEach(function(e,a){var t=r+"_"+a,i='<div class="group-container"><div class="radio" role="radio"><input id="'+t+'" type="radio" name="'+n+'" value="'+e.value+'"></div><label class="checkbox__label" for="'+t+'">'+e.value+"</label></div>";l.append(i),$(".custom_form_container .group-container #"+t).radio()}),l.append(s);break;case TYPE_CHECKBOX:var f;i.forEach(function(e,a){var t=r+"_"+a;f=t;var i='<div class="group-container"><div class="checkbox" role="checkbox"><input id="'+t+'" type="checkbox" name="'+n+'" value="'+e.value+'"></div><label class="checkbox__label" for="'+t+'">'+e.value+"</label></div>";l.append(i),$(".custom_form_container .group-container #"+t).checkbox({multiSelectable:!0})}),l.append(s);break;case TYPE_LINEAR_SCALE:i.forEach(function(e){var a=0,t=1*e.scale_right;t<1?t=1:t>10&&(t=10);var i=0;1*e.scale_left!==0?a=1:i=1;var o=2,d=100/(t+o+i);for(l.append('<div class="group-container" style="top: -30px; display: inline-block; width: '+d+'%"><div class="center"></div></div>'),a;a<=t;a++){var s=r+"_"+a,c='<div class="group-container" style="display: inline-block; position: relative; top: -20px; width: '+d+'%"><div class="center"><label class="label clickable label--default" for="'+s+'">'+a+'</label></div><div class="center"><input id="'+s+'" type="radio" name="'+n+'" value="'+a+'"></div></div>';l.append(c),$(".custom_form_container .group-container #"+s).radio()}l.append('<div class="group-container" style="top: -30px; display: inline-block; width: '+d+'%"><div class="center"></div></div>'),l.append('<div style="display: flex;"><div class="group-container" style="float: left; width: 50%; word-wrap:break-word; display: inline-block; text-align: center"><div>'+e.left_label+'</div></div><div class="group-container" style="float: right; padding-left: 15px; width: 50%; word-wrap:break-word; display: inline-block; text-align: center"><div>'+e.right_label+"</div></div></div>")}),l.append(s)}++$counter})})}function errorHandler(){var e=!1;return $form.find('.question_container[aria-required="true"]').each(function(a,t){var i=1*$(t).data("type"),r=$(t).find(".help-block");switch(r.empty(),i){case TYPE_LONG_TEXT_ANSWER:0===$(t).find("textarea").val().length&&(e=!0,r.text("Kérjük adj választ erre a kérdésre"));break;case TYPE_CHECKBOX:var n=[];$('input[name="'+$(t).find("input").prop("name")+'"]:checked').each(function(e){n[e]=$(this).val()}),0===n.length&&(e=!0,r.text("Kérjük adj választ erre a kérdésre"));break;case TYPE_RADIO:case TYPE_LINEAR_SCALE:var n=$('input[name="'+$(t).find("input").prop("name")+'"]:checked').val();n||(e=!0,r.text("Kérjük adj választ erre a kérdésre"))}}),e}function nextStepHandler(){$(document).on("click",'[show-step="custom_form"]',function(){errorHandler()})}function formHandler(e){var a=$(".custom_form_container"),t=$(".empty_category_message"),i=$(".description_container");if(t.addClass("hide"),i.removeClass("hide"),a.empty(),$counter=0,e&&Object.keys(e).length>0)for(var r in e)customFormHandler(e[r],a);else t.removeClass("hide"),i.addClass("hide")}!function(){function e(){function e(e){$.get("/report-category/get-taxonomy-by-category-id",{report_category:1*e},function(e){if(e&&Object.keys(e).length>0)for(var a in e)i.append('<option value="'+e[a].id+'">'+e[a].name+"</option>")})}IS_TAXONOMY_ENABLED&&(IS_CATEGORY_ENABLED?(e(t.val()),t.on("change",function(){i.html('<option value="">'+TEXT_CHOOSE_TAXONOMY+"</option>"),e($(this).val())})):e(DEFAULT_REPORT_CATEGORY_ID))}if(IS_CUSTOM_FORM_ENABLED){var a,t=$("#reportform-report_category_id"),i=$("#reportform-reporttaxonomyid");$('[show-step="custom_form"]').on("click",function(){var e,r;IS_TAXONOMY_ENABLED?(e=i.val(),r=TYPE_REPORT_TAXONOMY):IS_CATEGORY_ENABLED&&(e=t.val(),r=TYPE_REPORT_CATEGORY);var n=$(".empty_category_message"),o=$(".description_container"),d=$(".custom_form_container");return e?(d.text().length>0?(n.addClass("hide"),o.removeClass("hide")):(n.removeClass("hide"),o.addClass("hide")),e=1*e,void(a&&a===e||(a=e,$.get("/custom-form/get-custom-form-by-relation",{type:r,entity_id:a},function(e){formHandler(e)})))):(n.removeClass("hide"),o.addClass("hide"),void d.empty())}),e(),$(document).ready(function(){var e=$("#report-create-form");e.on("beforeValidate",function(){return!errorHandler()||(alert("Hiba történt! Kérjük ellenőrizd az egyedi űrlapon adott válaszaid majd küldd be ismét!"),!1)})})}}();var $form=$("#report-create-form"),$counter=0;setTimeout(function(){nextStepHandler()},0);