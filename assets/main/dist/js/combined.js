$(function(){var e={init:function(){this.cacheDOM(),this.bindEvents()},cacheDOM:function(){this.header=$("header")},bindEvents:function(){$(document).scroll(this.handleScroll)},handleScroll:function(){var t=$(".alert-flashes").first();window.matchMedia("(min-width: 1080px)").matches?$(t).length>0&&$(window).scrollTop()<e.header.outerHeight()?t.css({top:e.header.outerHeight()-$(window).scrollTop()}):t.css({top:0}):t.css({top:e.header.outerHeight()})}};e.init()});var site=function(e){"use strict";return{urlToShare:"",syncInput:function(){e("[sync]").each(function(){var t=e(this),i=e(t.attr("sync")),o=i.prop("tagName").toLowerCase();switch(o){case"textarea":i.on("input sync",function(i){var o=e(i.target||i.srcElement||i.originalTarget);t.text(o.val())});break;case"input":i.on("input sync",function(i){var o=e(i.target||i.srcElement||i.originalTarget);t.val(o.val())});break;case"select":i.on("input sync",function(i){var o=e(i.target||i.srcElement||i.originalTarget);t.val(o.find(":selected").text())})}i.trigger("sync")})},message:function(t){function i(){var t=e('<div class="alert-flashes"><div class="alert alert-'+o.type+'" role="alert">'+o.text+"</div></div>");e("main").prepend(t),site.hideAlert(),e(document).trigger("scroll")}var o=e.extend(!0,{text:"",ajaxComplete:"",type:"success"},t||{});o.ajaxComplete?e(document).on("ajaxComplete",function(e,t){var n=t.responseJSON[o.ajaxComplete];n&&n[0]&&i()}):i()},hideOnClick:function(){e("[click-hide]").on("click",function(t){t.preventDefault();var i=e(this);i.closest(i.attr("click-hide")).hide()})},hideAlert:function(){setTimeout(function(){e(".alert-flashes .alert").fadeOut()},4e3)},togglePassword:function(t){e("[toggle-password]").on("click",function(i){i.preventDefault();var o=e(this),n=t?o.closest(t).find("input:first"):o;"text"===n.attr("type")?n.attr("type","password"):n.attr("type","text")})},init:function(){site.hideOnClick(),site.hideAlert(),site.syncInput(),site.togglePassword(".input-group"),svg4everybody({}),e(".owl-carousel").owlCarousel({items:1,thumbs:!0,thumbsPrerendered:!0,dots:!1,nav:!0,navText:"",navContainer:".owl-nav"})}}}(jQuery);$(document).ready(function(){site.init()}),function(e,t){"use strict";return e.extend(t,{Helper:{purifyStringDOM:function(e){return(e||"").replace(/(\r\n|\n|\r)/gm,"")},isIE:function(e){return e=e||navigator.userAgent,e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1||e.indexOf("Edge/")>-1}}})}(jQuery,site||{}),$(function(){var e={dictDefaultMessage:null,dictFallbackMessage:null,dictFallbackText:null,dictInvalidFileType:null,dictFileTooBig:null,dictResponseError:null,dictCancelUpload:null,dictCancelUploadConfirmation:null,dictRemoveFile:null,dictMaxFilesExceeded:null,targetZone:".file-upload",addRemoveLinks:!0,headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},parallelUploads:5,maxFiles:5,acceptedFiles:"image/*",previewsContainer:null},t={common:function(t){$.extend(!0,e,t||{})},handleErrorSummary:function(){var e=$("#report-create-form > .error__sum");$(".field-reportform-pictures").removeClass("has-error").slideUp(),$(".has-error").length>0?e.slideDown():e.slideUp()},init:function(i){var o=$(i.targetZone);if(i=$.extend(!0,{},e,i||{}),!o.length)return!1;var n=o&&o.data("upload-url"),s=o&&o.data("delete-url"),a=o&&o.data("input-name")+"[]";if(n){var r={url:n,removedfile:function(e){var t=e.name;$.ajax({type:"POST",url:s,data:{fileName:t},dataType:"html"});var i=e.previewElement;return null!==i?i.parentNode.removeChild(e.previewElement):0},init:function(){var e=this;e.on("complete",function(e){var t=o;i.previewsContainer&&(t=$(i.previewsContainer)),"success"===e.status&&t.find(".dz-preview:last").append('<input type="hidden" name="'+a+'" value="'+e.name+'">')}),e.on("addedfile",function(e){if(this.files.length){var i,o;for(i=0,o=this.files.length;i<o-1;i++)this.files[i].name===e.name&&this.files[i].size===e.size&&this.files[i].lastModifiedDate.toString()===e.lastModifiedDate.toString()&&this.removeFile(e)}t.handleErrorSummary()}),e.on("removedfile",function(){}),e.on("maxfilesexceeded",function(t){e.removeFile(t)}),e.on("maxfilesreached",function(){})}};r=$.extend(!0,{},r,i||{}),o.dropzone(r)}return!0}};$(function(){t.common({dictRemoveFile:"",dictMaxFilesExceeded:"Elérted a képfeltöltés limitet."}),t.init({targetZone:".file-upload--report"}),t.init({targetZone:".file-upload--comment",previewsContainer:".file-upload--previews",clickable:".file-upload--comment, .file-upload--previews",errorBlock:".comment__body .help-block"})})}),function(e,t){"use strict";return e.extend(t,{Donate:{init:function(){var t=e("#paypal-donate-form"),i=e("#paypal-subscribe-form"),o=t.find('input[name="amount"]'),n=i.find('input[name="a3"]'),s=e("#donate-frequency"),a=e("#donate-box-paypal .button--donate"),r=e("#paypal-other-amount"),c=e("#paypal-other-amount").find('input[name="amount"]'),l=e("#paypal-donate-submit");e(".donationbox").on("click",function(){var i=this;o.val(e(i).data("value")),t.submit()});var d=a.filter(function(t,i){return e(i).hasClass("active")}),u=d.data("value");c.val(u),a.on("click",function(){var t=e(this),i=t.data("value");t.hasClass("button-donate-other")?(c.val(""),r.show()):(r.hide(),c.val(i)),c.trigger("input"),n.val(c.val()),o.val(c.val()),a.removeClass("active"),t.addClass("active")}),c.on("input",function(){var t=e(this);t.val(parseInt(t.val(),10)||""),t.val()>0?l.prop("disabled",!1):l.prop("disabled",!0)}),l.on("click",function(e){e.preventDefault(),+c.val()>0&&("monthly"===s.find(":checked").val()?(n.val(c.val()),i.submit()):(o.val(c.val()),t.submit()))})}}})}(jQuery,site||{}),$(document).ready(function(){site.Donate.init()}),function(e){"use strict";function t(){i=e(n),e(document).on("click",o,function(e){e.preventDefault(),i.toggleClass(s),r.toggleClass(a)})}var i,o=".js--toggle-navigation",n=".navigation",s="navigation--active",a="body--navigation-opened",r=e("body");t()}(jQuery),function(e,t){"use strict";function i(t){var i,n,s,r,c,l=t.val();if(o.find(".video-item").length>=10)return!1;var d=t.closest(".video-item");return d.find(".video-preloader").length||d.find(".add-video").after('<div class="video-preloader"></div>'),""===l&&d.find(".video-preloader").remove(),e.ajax({url:baseUrl+"/report/parse-video-url",type:"post",dataType:"json",data:{url:l.replace("http:","https:")},success:function(u){if(u&&u.success){i=u.videoData.type,n=u.videoData.hash,s=u.videoData.videoUrl,/https:\/\//i.test(s)||(s=s.replace(/^http:\/\//i,"https://")),r=u.videoData.width,c=u.videoData.height;var h=0!==e("#cont-"+i+"-"+n).length;if(h)return d.find(".add-video").val(t.data("val")||""),d.find(".video-preloader").remove(),!1;t.data("val",l);var p=e("");d.find(".video-embed-container").length?(p=t.closest(".video-item").find(".video-embed-container"),d.find(".video-preloader").remove()):(p=d.find(".video-preloader"),o.append(e(a)));var f=e('<div id="cont-'+i+"-"+n+'" class="video-embed-container"></div>'),m=e('<div class="video-wrapper"><iframe class="support-box_video" id="player-'+n+'" width="'+r+'" height="'+c+'" src="'+s+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>');m.appendTo(f);var v=e('<button type="button" class="video-embed-remove"></button>').appendTo(f);p.replaceWith(f),v.on("click",function(e){e.preventDefault(),d.remove();var t=o.find(".video-item");1===t.length&&t.find(".add-video").trigger("input")})}return!0},error:function(){}}),!0}var o,n,s,a;return e.extend(t,{Report:{mapData:[],steps:function(){function t(t){e(".steps__icon").removeClass("steps__icon--active"),e('[step="'+t+'"]').css({display:"block"}),e('.steps [show-step="'+t+'"]').addClass("steps__icon--active")}var i=e("[step]"),o=e(".video-container");t(1),e(document).on("click","[show-step]",function(){var n=e(this),s=e(".steps__icon--active").attr("show-step"),a=n.attr("show-step");if(setTimeout(function(){window._mapReady.resize()},0),"custom_form"===s&&IS_CUSTOM_FORM_ENABLED&&errorHandler()&&1*a!==1)return void e(".help-block").each(function(){var t=e(this);t.text().length>0&&window.scrollTo({top:t.offset().top-250,behavior:"smooth",block:"start"})});var r=e('.step[step="custom_form"]');"custom_form"===a&&r.show(),window.scrollTo(0,0),i.hide(),"final"===a?(setTimeout(function(){r.hide()},0),i.addClass("step--final"),t(a),i.show(),o.children().length?o.closest(".row").show():o.closest(".row").hide()):(o.closest(".row").show(),i.removeClass("step--final"),t(a))}),e(document).on("click",".step__helper",function(){var t=e(this);e("<div>"+t.closest(".step").find(".step__help:eq(0)").html()+"</div>").modal({escapeClose:!0,clickClose:!0,showClose:!0,fadeDuration:300,closeText:""})}),e(document).on("click",'[data-target="#tosModal"]',function(){e("<div>"+e(".tos_container").html()+"</div>").modal({escapeClose:!0,clickClose:!0,showClose:!0,fadeDuration:300,closeText:""})})},init:function(){var r;o=e(".video-container"),n=e("#template-source"),e("#report-create-form").length&&(s=e(t.Helper.purifyStringDOM(n.data("input-template"))).find("input").clone().addClass("add-video").attr("type","text").attr("id",null)[0].outerHTML,a='<div class="video-item"><label for="" class="label label--default">Link a videóra</label>'+s+"</div>"),autosize(e(".autogrow-textarea")),e(".gallery, .comment__pictures").lightGallery({animateThumb:!1,showThumbByDefault:!1}),e(".owl-item.unwrap").unwrap(),e(".owl-item").width(e(".owl-stage-outer").width()),e(".owl-stage, .owl-thumbs").lightGallery({animateThumb:!1,showThumbByDefault:!1,exThumbImage:"data-exthumbimage"}),e(".owl-nav").children().height(e(".owl-stage").height()),e(window).on("resize init",function(){clearTimeout(r),r=setTimeout(function(){e(".owl-nav").children().height(e(".owl-stage").height()),e(".report__thumbs__item").removeClass("active").first().addClass("active")},200)}).trigger("init"),e(".owl-stage .owl-item").length<2&&e(".owl-thumbs, .owl-nav").hide();var c=!1;e(document).on("click","[init-video-upload]",function(t){t.preventDefault();var i=e("#video-link"),n=e("#video-link-panel");c||(c=!0,i.show(),window.matchMedia("(min-width: 1080px)").matches&&n.show(),o.append(e(a)))});var l=null;e(document).on("input",".add-video[type=text]",function(){var t=e(this);clearTimeout(l),l=setTimeout(function(){i(t)},300)}),e(document).on("pjax:start","#report-activity-list",function(){e("#report-comment-form")[0]&&e("#report-comment-form")[0].reset()}),e(document).on("change","#city-dropdown",function(){var t=e("#reportform-user_location");t.val(e("option:selected",this).text()+", "),t.focus(),e("#report-create-form button.show-on-map").click(),setTimeout(function(){t.val(e("option:selected","#city-dropdown").text()+", "),e(".pac-container").hide(),t.focus()},300)}),e(document).on("keyup keypress change","#reportform-user_location",function(){var t=e(this).val().split(",")[0],i=e("#city-dropdown option");e("#city-dropdown option").prop("selected",!1),e.each(i,function(i,o){var n=e(o);n.text()===t&&e('#city-dropdown option[value="'+n.val()+'"]').prop("selected","selected")})}),e("#reportform-user_location").val(e("option:selected",e("#city-dropdown")).text()+", "),e(document).on("change","#report-search-form select, #front-search-form select",function(){e(this).closest("form").submit()});var d=this;e(document).ready(function(){e(document).on("mapReady",d.steps),window._mapReady&&e(document).trigger("mapReady",window._mapReady)}),e(document).on("change","#report-map-search-form-city",function(){var t=e("#map-search-form-location");t.val(e("option:selected",this).text()+", ")}),e(document).on("keyup keypress change","#map-search-form-location",function(){var t=e(this).val().split(",")[0],i=e("#report-map-search-form-city option");e("#report-map-search-form-city option").prop("selected",!1),e.each(i,function(i,o){var n=e(o);n.text()===t&&e('#report-map-search-form-city option[value="'+n.val()+'"]').prop("selected","selected")})}),"undefined"!=typeof e("#map-search-form-location").val()&&0===e("#map-search-form-location").val().length&&e("#map-search-form-location").val(e("option:selected",e("#report-map-search-form-city")).text()+", ")}}})}(jQuery,site||{}),$(document).ready(function(){$(function(){site.Report.init()})}),$(function(){var e={init:function(){this.cacheDOM(),this.bindEvents(),this.toggleErrorSummary(),this.setDefaultAddressFieldsByMap()},cacheDOM:function(){this.mainErrorBlock=$("#report-create-form > .error__sum"),this.form=$("#report-create-form"),this.errorSelector=".has-error",this.firstErrorSelector=$(".has-error").first(),this.showOnMap=$("#report-create-form button.show-on-map:visible"),this.$attachmentContainer=$("#draft-attachments")},bindEvents:function(){this.form.on("ajaxComplete",this.handleErrorSummary),$(document).on("click",".remove-attachment",this.updateDraftAttachments),$(".user_location__clear").on("click",this.clearUserLocation)},handleErrorSummary:function(t,i){Object.keys(i.responseJSON).length>0&&$(e.errorSelector).length>0?(e.mainErrorBlock.slideDown(),$("html, body").animate({scrollTop:$(".has-error").first().offset().top-70},500)):e.mainErrorBlock.slideUp()},toggleErrorSummary:function(){$(e.errorSelector).length>0?this.mainErrorBlock.slideDown():this.mainErrorBlock.slideUp()},setDefaultAddressFieldsByMap:function(){this.showOnMap.click()},updateDraftAttachments:function(t){t.preventDefault(),$.ajax({url:$(this).data("url"),type:"post",dataType:"json",success:function(t){return t&&t.success&&e.$attachmentContainer.hide().html(t.html).fadeIn(),!0},error:function(){}})},clearUserLocation:function(e){e.preventDefault();var t=$("#reportform-user_location"),i=t.val(),o=i.indexOf(",");o>-1&&(t.val(i.slice(0,o+1)),t.focus())}};e.init()}),$(function(){var e={init:function(){this.cacheDOM(),this.bindEvents()},cacheDOM:function(){this.mainErrorBlock=$("#report-create-form > .error__sum"),this.header=$("header"),this.errorSelector=".has-error"},bindEvents:function(){$(document).scroll(this.handleScroll)},handleScroll:function(){window.matchMedia("(min-width: 1080px)").matches?$(e.errorSelector).length>0&&$(window).scrollTop()<e.header.height()?e.mainErrorBlock.css({position:"absolute",top:e.header.height()+25}):e.mainErrorBlock.css({position:"fixed",top:0}):e.mainErrorBlock.css({position:"fixed",top:e.header.outerHeight()-1})}};e.init()}),$(function(){var e={init:function(){this.cacheDOM(),this.bindEvents(),this.toggleFields()},cacheDOM:function(){this.selectorStatusDesktop="#reportsearch-status",this.selectorStatusMobile="#reportsearch-status-mobile",this.selectorCityIdDesktop="#report-list-container #reportsearch-city_id",this.selectorCityIdMobile="#reportsearch-city_id-mobile",this.selectorDistrictIdDesktop="#reportsearch-district_id",this.selectorDistrictIdMobile="#reportsearch-district_id-mobile"},bindEvents:function(){$(window).on("resize",this.toggleFields),$(document).on("ajaxComplete",this.toggleFields)},toggleFields:function(){var t=window.innerWidth;t<1080?($(e.selectorStatusMobile).prop("disabled",!1),$(e.selectorCityIdMobile).prop("disabled",!1),$(e.selectorDistrictIdMobile).prop("disabled",!1),$(e.selectorStatusDesktop).prop("disabled","disabled"),$(e.selectorCityIdDesktop).prop("disabled","disabled"),$(e.selectorDistrictIdDesktop).prop("disabled","disabled")):($(e.selectorStatusDesktop).prop("disabled",!1),$(e.selectorCityIdDesktop).prop("disabled",!1),$(e.selectorDistrictIdDesktop).prop("disabled",!1),$(e.selectorStatusMobile).prop("disabled","disabled"),$(e.selectorCityIdMobile).prop("disabled","disabled"),$(e.selectorDistrictIdMobile).prop("disabled","disabled"))}};e.init()}),$(function(){var e={init:function(){this.bindEvents()},bindEvents:function(){$(document).on("click",".ajax-modal[data-url]",this.handler),$(document).on("click","button.comment__more",this.showMore)},showMore:function(){var e=$(this),t=e.data("id"),i=$('.more-sign[data-id="'+t+'"]'),o=$('.comment__rest-part[data-id="'+t+'"]');e.hasClass("ajax-modal")||(e.remove(),i.remove()),o.fadeIn()},handler:function(e){e.preventDefault();var t=$(this),i=t.data("url"),o=t.data("confirm-message"),n=function(){$.ajax({url:i,dataType:"json",beforeSend:function(){site.Loader.show()},success:function(e){$("<div>"+e.html+"</div>").modal({escapeClose:!0,clickClose:!0,showClose:!0,fadeDuration:200,modalClass:"modal modal--offset",closeText:""}).on($.modal.CLOSE,function(){t.fadeIn()})},error:function(e){}})};return o?(bootbox.confirm({message:o,buttons:{confirm:{label:"OK"},cancel:{label:"Cancel"}},callback:function(e){e&&n()}}),!1):(n(),!1)}};e.init()}),function(e,t){"use strict";var i,o=0,n=t.Helper.isIE(),s={init:function(){this.cacheDOM(),this.bindEvents()},cacheDOM:function(){this.sideCommentsTop=0,this.sideCommentsHeight=0,this.$sideComments=e("#comments-sidebar"),this.$sideComments.data("height",this.$sideComments.outerHeight()),this.$sideComments.data("width",this.$sideComments.outerWidth()),this.$header=e("header.header"),this.$reportDescription=e("#report-description")},bindEvents:function(){e(document).on("ready",this.loadScroll)},calcHeight:function(){var t=this.$header.outerHeight()-e(window).scrollTop(),i=e(window).scrollTop()-(t>-1?t:0)+e(window).height();return s.sideCommentsHeight+20>i?i:s.sideCommentsHeight+20},headerDistanceDiff:function(){var t=this.$header.outerHeight()-e(window).scrollTop();return t>-1?t:0},calcScroll:function(){window.matchMedia("(min-width: 1080px)").matches&&s.$sideComments.length>0&&(s.$sideComments.css({position:n?"":"fixed",top:s.headerDistanceDiff(),bottom:"",height:s.calcHeight(),maxHeight:e(window).height(),overflow:"hidden"}),s.$header.outerHeight()+s.$reportDescription.outerHeight()<=s.$sideComments.outerHeight()+s.$sideComments.offset().top&&s.$sideComments.css({position:"absolute",top:"",bottom:0}))},handleScroll:function(){if(window.matchMedia("(min-width: 1080px)").matches&&s.$sideComments.length>0)if(n){var e=100,t=(new Date).getTime();i||(t-o>3*e&&(s.calcScroll(),o=t),i=setTimeout(function(){i=null,o=(new Date).getTime(),s.calcScroll()},e))}else s.calcScroll();else s.$sideComments.css({position:"",top:"",bottom:"",height:"",width:"",overflow:"hidden"})},loadScroll:function(){window.matchMedia("(min-width: 1080px)").matches&&s.$sideComments.length>0&&(s.sideCommentsTop||(s.sideCommentsTop=s.$sideComments.offset().top,s.sideCommentsHeight=s.$sideComments.outerHeight()),s.$sideComments.mCustomScrollbar({theme:"dark",scrollInertia:250,updateOnContentResize:!0}),s.$sideComments.css({position:"absolute",width:s.$sideComments.data("width")}),e(document).on("scroll init",s.handleScroll).trigger("init"),e(window).on("resize init",s.handleScroll).trigger("init"),e(window).on("resize",function(){s.$sideComments.mCustomScrollbar("update")}))}};s.init()}(jQuery,site),function(e,t){"use strict";return e.extend(t,{Profile:{init:function(){e(document).on("change","#form-profile-filter select, #form-user-city-district #user-city_id, #form-user-city-district #user-district_id",function(){e(this).closest("form").submit()}).on("ajaxComplete",function(t,i){if(0===e("#au-profile-picture-container").length)return!1;var o=e.parseJSON(i.responseText),n=o["UserInfoChangeForm[image_file_name]"];return!!n&&(e(".profile__user .profile__avatar img").attr("src",n[0].thumbnailUrl),!0)})}}})}(jQuery,site||{}),$(document).ready(function(){site.Profile.init()}),function(e,t){"use strict";return e.extend(t,{Statistics:{init:function(){e(document).on("change","#statistics-city-filter-form select, #statistics-city-category-filter-form select, #statistics-institution-filter-form select, #statistics-institution-category-filter-form select",function(){e(this).closest("form").submit()})}}})}(jQuery,site||{}),$(document).ready(function(){site.Statistics.init()}),function(e,t){"use strict";return e.extend(t,{Rss:{init:function(){e(document).on("change","#rss-submit-form select",function(){e("#rss-submit-form").submit()})}}})}(jQuery,site||{}),$(document).ready(function(){site.Rss.init()}),function(e,t){"use strict";function i(e,t){"undefined"!=typeof ga&&ga("send",{hitType:"social",socialNetwork:e,socialAction:"share",socialTarget:t})}return e.extend(t,{Share:{init:function(){e(".button--facebook--share").click(function(e){e.preventDefault(),i("Facebook",t.urlToShare),FB.ui({method:"share",href:t.urlToShare})})}}})}(jQuery,site||{}),$(document).ready(function(){site.Share.init()}),function(e,t){"use strict";function i(t,i,s){if(s||o[s]){var a=(new Date).getTime(),r=t.getAttribute("name");r||(r=s+"_"+a);var c=t.getAttribute("id");c||(c=s+"_"+a,t.setAttribute("id",c)),this.options=e.extend(!0,{},o.$$common,o[s],i||{}),this.el=t,this.$el=e(this.el),this.type=s,this.checked=this.el.checked,this.group=r,(n[r]=n[r]||[]).push(t),this.$template=e(this.options.template),this.$template.data(s,this),this.checked&&this.$template.addClass(this.options.classes.checked),this.options.init&&(this.hide(),this.insertTemplate(),this.bindChange())}}var o={$$common:{init:!0,removeText:!0,label:"",css:"",append:"wrap"},radio:{selector:'[type="radio"]',prefix:"radio-",template:'<div class="radio"></div>',check:'<div class="radio__check"></div>',multiSelectable:!1,deselectable:!1,classes:{label:"radio__label",checked:"radio--checked",hover:"radio--hover"}},checkbox:{selector:'[type="checkbox"]',prefix:"checkbox-",template:'<div class="checkbox"></div>',check:'<div class="checkbox__check"></div>',deselectable:!0,multiSelectable:!1,classes:{label:"checkbox__label",checked:"checkbox--checked",hover:"checkbox--hover"}}},n={};return i.prototype.hide=function(){this.$el.hide()},i.prototype.insertTemplate=function(){var t=this.$el;switch(this.options.css&&this.$template.addClass(this.options.css),this.options.append){case"after":t.after(this.$template);break;case"before":t.before(this.$template);break;case"wrap":this.$template=t.wrap(this.$template).parent(),this.options.removeText&&this.$template.parent().contents().filter(function(){return 3===this.nodeType}).remove();break;default:var i=e(this.options.append);if(!i.length)throw Error("Invalid append");i.append(this.$template)}this.$template.find(o[this.type].selector).after(this.options.check),this.options.label&&this.$template.after('<label for="'+t.attr("id")+'" class="'+this.options.classes.label+'">'+this.options.label+"</label>")},i.prototype.bindChange=function(){function t(e){e.preventDefault(),e.stopPropagation(),c.trigger("change:checked")}function i(){a.$template.addClass(a.options.classes.hover)}function o(){a.$template.removeClass(a.options.classes.hover)}function s(){n[a.group].map(function(t){if(a.el===t)a.options.deselectable?(a.checked=!a.checked,setTimeout(function(){c.prop("checked",a.checked),a.checked?a.$template.addClass(a.options.classes.checked):a.$template.removeClass(a.options.classes.checked)},0)):a.checked||(a.checked=!0,setTimeout(function(){c.prop("checked",!0),a.$template.addClass(a.options.classes.checked)},0)),c.trigger("change");else if(!a.options.multiSelectable){var i=e(t),o=i.data(a.type);o&&(o.checked=!1,setTimeout(function(){i.prop("checked",!1),o.$template.removeClass(a.options.classes.checked)},0),i.trigger("change"))}})}var a=this,r=a.$template,c=a.$el,l=c.closest("label");if(!a.$template)throw Error("Missing template");c.on("click",t),c.on("change:checked",s),r.on("click",t),r.on("mouseenter",i),r.on("mouseleave",o),l.on("mouseenter",i),l.on("mouseleave",o),l.on("click",t)},e.fn.radio=e.fn.checkbox=function(t){return this.each(function(){var n=e(this),s=n.attr("name"),a=e('[name="'+s+'"][type="hidden"]');a.remove();var r=n.attr("type"),c=n.attr(o[r].prefix+"autodiscover"),l=!c||!!+c==!0;if(l&&o[r]&&!n.data(r)){var d=e.extend(t,{append:n.attr(o[r].prefix+"append"),label:n.attr(o[r].prefix+"label"),css:n.attr(o[r].prefix+"css")});return n.data(r,new i(this,d,r))}return!0})},e.extend(t,{Checkbox:{init:function(){e('[type="checkbox"]').checkbox()}},Radio:{init:function(){e('[type="radio"]').radio()}}})}(jQuery,site||{}),$(site.Checkbox.init),$(site.Radio.init),function(e,t){"use strict";return e.extend(t,{Tabs:{init:function(){var t="report__tabs__header__link--active",i=e(".report__tabs__header__item [href^=#]"),o=e("[tab]");i.each(function(){var n=e(this),s=e('[tab="'+n.attr("href").substring(1)+'"]');s.length&&n.on("click",function(e){e.preventDefault(),i.removeClass(t),o.hide(),n.addClass(t),s.show()})})}}})}(jQuery,site||{}),$(document).ready(function(){site.Tabs.init()}),function(e,t){"use strict";function i(t,i){this.el=t,this.$el=e(this.el),this.options=e.extend(!0,{},o,i||{}),this.open=!this.options.open,this.$toggle=this.$el.find("."+this.options.classes.toggle),this.$content=this.$el.find("."+this.options.classes.content),this.options.open&&(this.$toggle.addClass(this.options.classes.toggleActive),this.$content.addClass(this.options.classes.active)),this.options.init&&this.bind()}var o={init:!0,open:!1,classes:{toggle:"accordion__title",toggleActive:"accordion__title--active",content:"accordion__content",active:"accordion__content--active"}};return i.prototype.bind=function(){function e(){t.open=!t.open,t.open?(t.$toggle.removeClass(t.options.classes.toggleActive),t.$content.removeClass(t.options.classes.active)):(t.$toggle.addClass(t.options.classes.toggleActive),t.$content.addClass(t.options.classes.active))}var t=this;t.$toggle.on("click",e)},e.fn.accordion=function(t){return this.each(function(){var o=e(this);if(!o.data("accordion")){var n=e.extend(t,{});return o.data("accordion",new i(this,n))}return!0})},e.extend(t,{Accordion:{init:function(){e(".accordion").accordion({})}}})}(jQuery,site||{}),$(site.Accordion.init);var position={init:function(){this.cacheDOM(),this.bindEvents()},cacheDOM:function(){},bindEvents:function(){},round:function(e){return Math.round(1e7*e)/1e7},location:{init:function(){navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(position.location.successCallback,position.location.errorCallback)},successCallback:function(e){var t=window.location.href,i=position.round(e.coords.latitude)+"&long="+position.round(e.coords.longitude);t+=t.indexOf("?")>-1?"&lat="+i:"?lat="+i,window.location.href.indexOf("&long=")===-1&&(window.location.href=t)},errorCallback:function(){}}};!function(e,t){"use strict";function i(){a.addClass("is-expanded"),s.addClass("js-expanded-context"),a.height(r.outerHeight(!0)+50)}function o(){a.removeClass("is-expanded"),s.removeClass("js-expanded-context"),a.height(0)}function n(){a.hasClass("is-expanded")?o():i()}var s=e(".content-toggle"),a=e(".expandable-wrapper"),r=e(".expandable-content");return e.extend(t,{Collapse:{init:function(){s.on("click",n)}}})}(jQuery,site||{}),$(document).ready(function(){site.Collapse.init()}),function(e,t){"use strict";function i(){e("overlay").length||e(document).find("body").append('<div class="overlay"><div class="loader">'+loaderMessage+"</div></div>"),e(".overlay").fadeIn()}function o(){e(document).find(".overlay").fadeOut(function(){e(this).remove()})}return e.extend(t,{Loader:{init:function(){e(document).on("submit","form.init-loader",i),e(document).on("click","a.init-loader",i),e(document).on("click",".init-loader-button",i),e(document).on("click",".overlay",o),e(document).on("ajaxComplete",o),e(document).on("pjax:end",o)},show:i}})}(jQuery,site||{}),$(document).ready(function(){site.Loader.init()}),$(function(){var e={init:function(){this.bindEvents()},bindEvents:function(){$(document).on("click",".report-list--filter",this.toggle),$(document).on("click",".front-filter--search-icon-link",this.toggle)},toggle:function(e){e.preventDefault(),$("#front-report-search").slideToggle()}};e.init()}),$(function(){var e={init:function(){this.cacheDOM(),this.bindEvents()},cacheDOM:function(){this.toc=$(".toc"),this.toc.data("height",this.toc.outerHeight()),this.toc.data("width",this.toc.outerWidth()),this.header=$("header.header"),this.footer=$("footer.footer")},bindEvents:function(){$(document).on("scroll ready",this.handleScroll),$(window).on("resize",this.handleScroll)},handleScroll:function(){if(0!==e.footer.length){var t=$(window).scrollTop(),i=e.footer.offset().top-e.toc.data("height")-30;if(window.matchMedia("(min-width: 1080px)").matches){if(t<e.header.height()?e.toc.css({position:"",width:""}):e.toc.css({position:"fixed",width:e.toc.data("width"),top:0}),i<t){var o=i-t;e.toc.css({top:o})}}else e.toc.css({position:""})}}};e.init()}),$(function(){var e={init:function(){this.cacheDOM(),this.bindEvents()},cacheDOM:function(){this.container=$(".statistics"),this.header=$("header")},bindEvents:function(){$(document).ready(this.scrollTo)},scrollTo:function(){!window.matchMedia("(min-width: 1080px)").matches&&$(e.container).length&&$("html, body").animate({scrollTop:$(e.container).offset().top-e.header.outerHeight()},700)}};e.init()}),function(e,t){"use strict";return e.extend(t,{WidgetConfigure:{init:function(){e(document).on("change","#customize-widget-form",function(){e("#customize-widget-form").submit()})}}})}(jQuery,site||{}),$(document).ready(function(){site.WidgetConfigure.init()}),$(function(){$(window).scroll(function(){var e=$(".sticky-header"),t=$(window).scrollTop(),i=$(".sticky-header__after");$(window).width()>991&&(t>=90?(e.addClass("sticky-header-fixed"),i.addClass("margin-top")):(e.removeClass("sticky-header-fixed"),i.removeClass("margin-top")))})}),$(function(){var e={init:function(){this.bindEvents()},bindEvents:function(){$(document).on("click",".ajax-news-modal[data-url]",this.handler)},handler:function(e){e.preventDefault();var t=$(this),i=t.data("url"),o=function(){$.ajax({url:i,dataType:"json",beforeSend:function(){site.Loader.show()},success:function(e){$("<div>"+e.html+"</div>").modal({escapeClose:!0,clickClose:!0,showClose:!0,fadeDuration:200,modalClass:"modal",closeText:""}).on($.modal.CLOSE,function(){t.fadeIn()})},error:function(e){}})};return o(),!1}};e.init()});